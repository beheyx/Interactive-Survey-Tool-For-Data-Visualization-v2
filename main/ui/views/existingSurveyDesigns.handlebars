<!-- Survey Designs Page -->
<main class="existing-page">
  <div class="page-header">
    <h2>Your Survey Designs</h2>
    <a class="action-button" href="#surveyDesignsPopup">+ New Survey Design</a>
  </div>

  <div class="table-container">
    {{#if surveyDesigns}}
      <table class="data-table">
        <thead>
          <tr>
            <th class="col-name">Name</th>
            <th>Created</th>
            <th>Last Modified</th>
            <th class="actions-header">Actions</th>
          </tr>
        </thead>
        <tbody>
          {{#each surveyDesigns}}
            <tr>
              <td class="col-name">
                <a href="/surveyDesigns/{{id}}" class="table-link">{{name}}</a>
              </td>
              <td>{{createdAt}}</td>
              <td>{{updatedAt}}</td>
              <td class="actions-cell">
                <a class="table-btn rename-btn" href="#surveyDesignsRenamePopup{{id}}">Rename</a>
                <form action="/surveyDesigns/{{id}}/DELETE" method="POST" style="display: inline;">
                  <button class="table-btn delete-btn" type="submit">Delete</button>
                </form>
              </td>
            </tr>

            <!-- Rename popup for each item -->
            <div class="popup rename-popup" id="surveyDesignsRenamePopup{{id}}">
              <div class="popup-content">
                <h2>Rename "{{name}}"</h2>
                <form action="/surveyDesigns/{{id}}/PATCH" method="POST">
                  <input type="text" name="name" placeholder="new name" class="rename-input">
                  <p class="rename-error" hidden></p>
                  <button class="popup-rename-button">Rename</button>
                </form>
                <button type="button" class="popup-cancel-button" onclick="window.location.hash=''">Cancel</button>
              </div>
            </div>
          {{/each}}
        </tbody>
      </table>
    {{else}}
      <div class="empty-state">
        <p>No survey designs yet. Create your first one!</p>
        <a class="action-button" href="#surveyDesignsPopup">+ New Survey Design</a>
      </div>
    {{/if}}

    {{#if surError}}
      <p class="error-message">{{surError}}</p>
    {{/if}}
  </div>
</main>

<!-- New Survey Design Popup -->
<div class="popup" id="surveyDesignsPopup">
  <div class="popup-content">
    <h2>Create a New Survey Design</h2>
    <form action="/surveyDesigns" method="POST">
      <input type="text" name="name" placeholder="survey design name" />
      <button class="popup-create-button" id="create-survey-design-button">Create</button>
    </form>
    <button type="button" class="popup-cancel-button" onclick="window.location.hash=''">Cancel</button>
  </div>
</div>
