<!-- Published Survey Detail Page -->
<main class="existing-page">
  <div class="page-actions">
    <a href="/existing-published-surveys" class="back-button">← Back to Published Surveys</a>
  </div>

  <!-- Page header -->
  <div class="page-header">
    <div class="header-title-section">
      <h2>{{name}}</h2>
      <span class="survey-status status-{{status}}">{{status}}</span>
    </div>
    <div class="header-actions">
      <a href="?downloadCSV=true" class="action-button">Download CSV</a>
    </div>
  </div>

  <!-- Survey Details -->
  <div class="published-survey-details">
  <div class="detail-card">
    <div class="detail-header">
      <h3>Survey Link</h3>
      <a class="help" href="/faq.html#16" target="_blank">?</a>
    </div>
    <div class="detail-content">
      <div class="survey-url-container">
        <input type="text" readonly value="{{url}}" class="survey-url-input" id="surveyUrl">
        <button class="action-button action-button-secondary" onclick="copyToClipboard()">Copy Link</button>
      </div>
      <a href="{{url}}" target="_blank" class="survey-url-link">Open Survey in New Tab →</a>
    </div>
  </div>

  <div class="detail-grid">
    <div class="detail-card">
      <div class="detail-header">
        <h3>Opens</h3>
      </div>
      <div class="detail-content">
        <p class="detail-value">{{openDateTime}}</p>
      </div>
    </div>

    <div class="detail-card">
      <div class="detail-header">
        <h3>Closes</h3>
      </div>
      <div class="detail-content">
        <p class="detail-value">{{closeDateTime}}</p>
      </div>
    </div>
  </div>
  </div>
</main>

<script>
function copyToClipboard() {
  const urlInput = document.getElementById('surveyUrl');
  urlInput.select();
  urlInput.setSelectionRange(0, 99999); // For mobile devices
  document.execCommand('copy');

  // Visual feedback
  const button = event.target;
  const originalText = button.textContent;
  button.textContent = 'Copied!';
  button.style.background = '#43a047';
  button.style.borderColor = '#388e3c';
  button.style.color = 'white';

  setTimeout(() => {
    button.textContent = originalText;
    button.style.background = '';
    button.style.borderColor = '';
    button.style.color = '';
  }, 2000);
}
</script>