<!-- Published Survey Detail Page -->
<div class="page-actions">
  <a href="/existing-published-surveys" class="back-button">← Back to Published Surveys</a>
  <form action="/publishedSurveys/{{id}}/DELETE" method="POST" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this published survey? This will delete all collected responses and cannot be undone.');">
    <button type="submit" class="action-button action-button-danger">Delete Survey</button>
  </form>
</div>

<!-- Page header -->
<div class="published-survey-header">
  <div class="header-content">
    <h1>{{name}}</h1>
    <span class="survey-status status-{{status}}">{{status}}</span>
  </div>
  <div class="header-actions">
    <a href="?downloadCSV=true" class="action-button">Download CSV</a>
  </div>
</div>

<!-- Survey Details -->
<div class="published-survey-details">
  <div class="detail-card">
    <div class="detail-header">
      <h3>Survey Link</h3>
      <a class="help" href="/faq.html#16" target="_blank">?</a>
    </div>
    <div class="detail-content">
      <div class="survey-url-container">
        <input type="text" readonly value="{{url}}" class="survey-url-input" id="surveyUrl">
        <button class="action-button action-button-secondary" onclick="copyToClipboard()">Copy Link</button>
      </div>
      <a href="{{url}}" target="_blank" class="survey-url-link">Open Survey in New Tab →</a>
    </div>
  </div>

  <div class="detail-grid">
    <div class="detail-card">
      <div class="detail-header">
        <h3>Responses</h3>
      </div>
      <div class="detail-content">
        <p class="detail-value response-count">{{responseCount}}</p>
      </div>
    </div>
  </div>

  <form action="/publishedSurveys/{{id}}/PATCH" method="POST" class="edit-dates-form">
    <div class="detail-card">
      <div class="detail-header">
        <h3>Survey Schedule</h3>
        <a class="help" href="/faq.html#17" target="_blank">?</a>
      </div>
      <div class="detail-content">
        <div class="form-group">
          <label for="openDate">Opens</label>
          <div class="datetime-input-group">
            <input type="date" id="openDate" name="openDate" value="{{openDate}}" required class="date-input">
            <input type="time" id="openTime" name="openTime" value="{{openTime}}" required class="time-input">
          </div>
          <p class="form-help">When participants can start taking the survey</p>
        </div>

        <div class="form-group">
          <label for="closeDate">Closes</label>
          <div class="datetime-input-group">
            <input type="date" id="closeDate" name="closeDate" value="{{closeDate}}" required class="date-input">
            <input type="time" id="closeTime" name="closeTime" value="{{closeTime}}" required class="time-input">
          </div>
          <p class="form-help">When the survey will close and stop accepting responses</p>
        </div>

        <div class="form-actions">
          <button type="submit" class="action-button">Update Schedule</button>
          <p class="form-help-inline">Use this to extend deadlines or reopen closed surveys</p>
        </div>
      </div>
    </div>
  </form>
</div>

<script>
function copyToClipboard() {
  const urlInput = document.getElementById('surveyUrl');
  urlInput.select();
  urlInput.setSelectionRange(0, 99999); // For mobile devices
  document.execCommand('copy');

  // Visual feedback
  const button = event.target;
  const originalText = button.textContent;
  button.textContent = 'Copied!';
  button.style.background = '#43a047';
  button.style.borderColor = '#388e3c';
  button.style.color = 'white';

  setTimeout(() => {
    button.textContent = originalText;
    button.style.background = '';
    button.style.borderColor = '';
    button.style.color = '';
  }, 2000);
}
</script>