<head>
  <title>Editing {{name}}</title>
</head>

<!-- Edit Visualization Page -->
<div class="page-actions">
  <a href="/existing-visualizations" class="back-button">‚Üê Back to Visualizations</a>
  <form id="deleteVisualizationForm" action="/visualizations/{{visualizationId}}/DELETE" method="POST" style="display:inline;">
    <button type="button" class="action-button action-button-danger" onclick="showDeleteVisualizationModal()">
      Delete Visualization
    </button>
  </form>
</div>

<main class="content-wrap">
  <div class="visual-edit-container" style="height: calc(100vh - 180px);">
    <iframe
      src="{{visualURL}}/{{id}}?editor=true"
      height="100%"
      width="100%"
      title="Visualization Editor"
      style="border: 1px solid #e5e7eb; border-radius: 12px;"
    ></iframe>
  </div>
</main>

<!-- Delete Visualization Modal -->
<div id="deleteVisualizationModal" class="delete-modal" style="display:none;">
  <div class="delete-modal-content">
    <h3>Delete Visualization?</h3>
    <p>This action cannot be undone.</p>

    <div class="delete-modal-buttons">
      <button type="button" class="delete-btn-cancel" onclick="hideDeleteVisualizationModal()">Cancel</button>
      <button type="button" class="delete-btn-confirm" onclick="confirmDeleteVisualization()">Delete</button>
    </div>
  </div>
</div>

<script>
function showDeleteVisualizationModal() {
  document.getElementById('deleteVisualizationModal').style.display = 'flex';
}

function hideDeleteVisualizationModal() {
  document.getElementById('deleteVisualizationModal').style.display = 'none';
}

function confirmDeleteVisualization() {
    document.getElementById('deleteVisualizationForm').submit();
}
</script>

